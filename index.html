<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Num√©rologie">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="description" content="Application de Num√©rologie de Pythagore - Calculez votre chemin de vie, nombre d'expression et cycles de vie">
    <meta name="keywords" content="num√©rologie, pythagore, chemin de vie, cycles, expression">
    <meta name="author" content="Num√©rologie de Pythagore">
    <title>Num√©rologie de Pythagore v1.9.1</title>
    <!-- Updated: 2025-12-08 10:56 - Nuclear Button Fix + Frame2 Content Visibility -->
    
    <!-- External CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Num√©rologie de Pythagore <span class="version" id="app-version">v1.9.1</span> <span class="build-info" id="build-info">Build: 2025-12-08 10:56</span></h1>
        </header>

        <div class="main-content">
            <!-- Left Panel - Data Input -->
            <div class="left-panel">
                <h2>üìù Donn√©es personnelles</h2>
                
                <form id="client-form">
                    <div class="form-group">
                        <label for="firstName1">Pr√©nom 1 <span class="required">*</span></label>
                        <input type="text" id="firstName1" name="firstName1" required placeholder="Entrez le premier pr√©nom (obligatoire)">
                        <div class="error-message" id="firstName1-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName2">Pr√©nom 2</label>
                        <input type="text" id="firstName2" name="firstName2" placeholder="Entrez le deuxi√®me pr√©nom (optionnel)">
                        <div class="error-message" id="firstName2-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName3">Pr√©nom 3</label>
                        <input type="text" id="firstName3" name="firstName3" placeholder="Entrez le troisi√®me pr√©nom (optionnel)">
                        <div class="error-message" id="firstName3-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">Nom de famille <span class="required">*</span></label>
                        <input type="text" id="lastName" name="lastName" required placeholder="Entrez le nom de famille (obligatoire)">
                        <div class="error-message" id="lastName-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthDate">Date de naissance <span class="required">*</span></label>
                        <input type="date" id="birthDate" name="birthDate" required>
                        <div class="error-message" id="birthDate-error"></div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" id="submit-btn" class="btn btn-primary" disabled>
                            <span class="gear-large">‚öôÔ∏è</span><span class="gear-medium">‚öôÔ∏è</span> Calculer les r√©sultats
                        </button>
                        <button type="button" id="reset-btn" class="btn btn-secondary">
                            üîÑ R√©initialiser
                        </button>
                    </div>
                </form>
                
                <!-- ALTERNATIVE: iPhone Safari Floating Action Buttons -->
                <div class="mobile-fab-container" id="mobile-fab-container">
                    <div class="fab-backdrop"></div>
                    <button type="button" id="mobile-submit-btn" class="fab fab-primary" disabled>
                        <span class="fab-icon">‚öôÔ∏è</span>
                        <span class="fab-text">Calculer</span>
                    </button>
                    <button type="button" id="mobile-reset-btn" class="fab fab-secondary">
                        <span class="fab-icon">üîÑ</span>
                        <span class="fab-text">Reset</span>
                    </button>
                </div>
            </div>

            <!-- Right Panel - Tabbed Interface -->
            <div class="right-panel">
                <div class="client-info-header" id="client-info-header" style="display: none;"></div>
                
                <div class="tab-navigation">
                    <button class="tab-btn active" id="tab1-btn" onclick="switchTab('tab1')">Piliers</button>
                    <button class="tab-btn" id="tab2-btn" onclick="switchTab('tab2')">Cycles</button>
                    <button class="tab-btn" id="tab3-btn" onclick="switchTab('tab3')">Phase de r√©alisation</button>
                </div>
                
                <div class="tab-content">
                    <div class="tab-panel active" id="tab1-panel">
                        <div class="results-area" id="results-area">
                            <div class="empty-state" id="empty-state">
                                Remplissez les champs obligatoires (Pr√©nom 1, Nom de famille, Date de naissance) et cliquez sur "Calculer les r√©sultats" pour voir les sorties ici.
                            </div>
                            <div class="results-grid" id="results-container" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="tab2-panel">
                        <div class="results-area" id="cycles-area">
                            <div class="empty-state" id="cycles-empty-state">
                                Remplissez les champs obligatoires et cliquez sur "Calculer les r√©sultats" pour voir les cycles de vie ici.
                            </div>
                            <div class="cycles-grid" id="cycles-container" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="tab3-panel">
                        <div class="results-area" id="realization-area">
                            <div class="empty-state" id="realization-empty-state">
                                Remplissez les champs obligatoires et cliquez sur "Calculer les r√©sultats" pour voir la phase de r√©alisation ici.
                            </div>
                            <div class="realization-grid" id="realization-container" style="display: none;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="panel-actions" id="panel-actions" style="display: none;">
                    <button type="button" id="generate-pdf-btn" class="action-btn pdf-btn">üìÑ G√©n√©rer rapport PDF</button>
                    <button type="button" id="print-results-btn" class="action-btn print-btn">üñ®Ô∏è Imprimer les r√©sultats</button>
                </div>
            </div>
        </div>
    </div>

    <!-- External JavaScript Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- NUCLEAR OPTION: Create buttons from scratch with JavaScript -->
    <script>
        // NUCLEAR: Create completely new buttons that bypass all CSS issues
        function createNuclearButtons() {
            const isMobile = window.innerWidth <= 480 || /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            
            if (isMobile) {
                console.log('üö® NUCLEAR: Creating buttons from scratch for iPhone');
                
                // Remove any existing mobile buttons
                const existingNuclear = document.getElementById('nuclear-buttons');
                if (existingNuclear) {
                    existingNuclear.remove();
                }
                
                // Hide original form actions completely
                const formActions = document.querySelector('.form-actions');
                if (formActions) {
                    formActions.style.display = 'none !important';
                }
                
                // Create nuclear button container
                const nuclearContainer = document.createElement('div');
                nuclearContainer.id = 'nuclear-buttons';
                nuclearContainer.style.cssText = `
                    position: fixed !important;
                    bottom: 0px !important;
                    left: 0px !important;
                    right: 0px !important;
                    width: 100vw !important;
                    height: 120px !important;
                    z-index: 2147483647 !important;
                    pointer-events: none !important;
                    background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.9) 100%) !important;
                `;
                
                // Create CALCULATE button
                const calculateBtn = document.createElement('button');
                calculateBtn.id = 'nuclear-calculate';
                calculateBtn.innerHTML = '‚öôÔ∏è<br>CALCULER';
                calculateBtn.disabled = true;
                calculateBtn.style.cssText = `
                    position: absolute !important;
                    bottom: 20px !important;
                    right: 20px !important;
                    width: 90px !important;
                    height: 90px !important;
                    border-radius: 50% !important;
                    border: 5px solid #ffffff !important;
                    background: #27ae60 !important;
                    color: #ffffff !important;
                    font-size: 14px !important;
                    font-weight: 900 !important;
                    text-align: center !important;
                    line-height: 1.2 !important;
                    box-shadow: 0 15px 50px rgba(0,0,0,0.9) !important;
                    cursor: pointer !important;
                    pointer-events: auto !important;
                    -webkit-tap-highlight-color: transparent !important;
                    -webkit-appearance: none !important;
                    appearance: none !important;
                    transform: translateZ(0) !important;
                    -webkit-transform: translateZ(0) !important;
                    will-change: transform !important;
                `;
                
                // Create RESET button
                const resetBtn = document.createElement('button');
                resetBtn.id = 'nuclear-reset';
                resetBtn.innerHTML = 'üîÑ<br>RESET';
                resetBtn.style.cssText = `
                    position: absolute !important;
                    bottom: 20px !important;
                    right: 130px !important;
                    width: 90px !important;
                    height: 90px !important;
                    border-radius: 50% !important;
                    border: 5px solid #ffffff !important;
                    background: #e74c3c !important;
                    color: #ffffff !important;
                    font-size: 14px !important;
                    font-weight: 900 !important;
                    text-align: center !important;
                    line-height: 1.2 !important;
                    box-shadow: 0 15px 50px rgba(0,0,0,0.9) !important;
                    cursor: pointer !important;
                    pointer-events: auto !important;
                    -webkit-tap-highlight-color: transparent !important;
                    -webkit-appearance: none !important;
                    appearance: none !important;
                    transform: translateZ(0) !important;
                    -webkit-transform: translateZ(0) !important;
                    will-change: transform !important;
                `;
                
                // Add touch feedback
                [calculateBtn, resetBtn].forEach(btn => {
                    btn.addEventListener('touchstart', function() {
                        this.style.transform = 'translateZ(0) scale(0.95) !important';
                        this.style.webkitTransform = 'translateZ(0) scale(0.95) !important';
                    });
                    
                    btn.addEventListener('touchend', function() {
                        this.style.transform = 'translateZ(0) scale(1) !important';
                        this.style.webkitTransform = 'translateZ(0) scale(1) !important';
                    });
                });
                
                // Add buttons to container
                nuclearContainer.appendChild(calculateBtn);
                nuclearContainer.appendChild(resetBtn);
                
                // Add container to body
                document.body.appendChild(nuclearContainer);
                
                // Connect to form functionality
                const form = document.getElementById('client-form');
                
                // Calculate button functionality
                calculateBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('üö® NUCLEAR: Calculate button clicked');
                    if (form && !this.disabled) {
                        const submitEvent = new Event('submit', { bubbles: true, cancelable: true });
                        form.dispatchEvent(submitEvent);
                    }
                });
                
                // Reset button functionality
                resetBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('üö® NUCLEAR: Reset button clicked');
                    if (form) {
                        form.reset();
                        // Trigger reset event
                        const resetEvent = new Event('reset', { bubbles: true });
                        form.dispatchEvent(resetEvent);
                        
                        // Clear any error states
                        document.querySelectorAll('.form-group').forEach(group => {
                            group.classList.remove('error');
                        });
                        document.querySelectorAll('.error-message').forEach(error => {
                            error.classList.remove('show');
                        });
                        
                        // Disable calculate button
                        calculateBtn.disabled = true;
                        calculateBtn.style.background = '#95a5a6 !important';
                        calculateBtn.style.opacity = '0.7 !important';
                    }
                });
                
                // Form validation to enable/disable calculate button
                function updateCalculateButton() {
                    const firstName1 = document.getElementById('firstName1').value.trim();
                    const lastName = document.getElementById('lastName').value.trim();
                    const birthDate = document.getElementById('birthDate').value;
                    
                    const isValid = firstName1 && lastName && birthDate;
                    
                    calculateBtn.disabled = !isValid;
                    if (isValid) {
                        calculateBtn.style.background = '#27ae60 !important';
                        calculateBtn.style.opacity = '1 !important';
                    } else {
                        calculateBtn.style.background = '#95a5a6 !important';
                        calculateBtn.style.opacity = '0.7 !important';
                    }
                }
                
                // Listen for form changes
                const inputs = form.querySelectorAll('input');
                inputs.forEach(input => {
                    input.addEventListener('input', updateCalculateButton);
                    input.addEventListener('change', updateCalculateButton);
                });
                
                // Initial validation
                updateCalculateButton();
                
                console.log('‚úÖ NUCLEAR: Buttons created and functional');
            }
        }
        
        // Run nuclear option immediately
        createNuclearButtons();
        document.addEventListener('DOMContentLoaded', createNuclearButtons);
        window.addEventListener('load', createNuclearButtons);
        window.addEventListener('resize', createNuclearButtons);
    </script>
    
    <!-- Application JavaScript Modules -->
    <script src="js/version-manager.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/validator.js"></script>
    <script src="js/results-display.js"></script>
    <script src="js/form-handler.js"></script>
    <script src="js/test-suite.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
