<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Num√©rologie">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="description" content="Application de Num√©rologie de Pythagore - Calculez votre chemin de vie, nombre d'expression et cycles de vie">
    <meta name="keywords" content="num√©rologie, pythagore, chemin de vie, cycles, expression">
    <meta name="author" content="Num√©rologie de Pythagore">
    <title>Num√©rologie de Pythagore v1.9.1</title>
    <!-- Updated: 2025-12-08 10:40 - iPhone Safari Button Fix + Emergency Mobile Optimization -->
    
    <!-- External CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Num√©rologie de Pythagore <span class="version" id="app-version">v1.9.1</span> <span class="build-info" id="build-info">Build: 2025-12-08 10:40</span></h1>
        </header>

        <div class="main-content">
            <!-- Left Panel - Data Input -->
            <div class="left-panel">
                <h2>üìù Donn√©es personnelles</h2>
                
                <form id="client-form">
                    <div class="form-group">
                        <label for="firstName1">Pr√©nom 1 <span class="required">*</span></label>
                        <input type="text" id="firstName1" name="firstName1" required placeholder="Entrez le premier pr√©nom (obligatoire)">
                        <div class="error-message" id="firstName1-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName2">Pr√©nom 2</label>
                        <input type="text" id="firstName2" name="firstName2" placeholder="Entrez le deuxi√®me pr√©nom (optionnel)">
                        <div class="error-message" id="firstName2-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName3">Pr√©nom 3</label>
                        <input type="text" id="firstName3" name="firstName3" placeholder="Entrez le troisi√®me pr√©nom (optionnel)">
                        <div class="error-message" id="firstName3-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">Nom de famille <span class="required">*</span></label>
                        <input type="text" id="lastName" name="lastName" required placeholder="Entrez le nom de famille (obligatoire)">
                        <div class="error-message" id="lastName-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthDate">Date de naissance <span class="required">*</span></label>
                        <input type="date" id="birthDate" name="birthDate" required>
                        <div class="error-message" id="birthDate-error"></div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" id="submit-btn" class="btn btn-primary" disabled>
                            <span class="gear-large">‚öôÔ∏è</span><span class="gear-medium">‚öôÔ∏è</span> Calculer les r√©sultats
                        </button>
                        <button type="button" id="reset-btn" class="btn btn-secondary">
                            üîÑ R√©initialiser
                        </button>
                    </div>
                </form>
                
                <!-- ALTERNATIVE: iPhone Safari Floating Action Buttons -->
                <div class="mobile-fab-container" id="mobile-fab-container">
                    <div class="fab-backdrop"></div>
                    <button type="button" id="mobile-submit-btn" class="fab fab-primary" disabled>
                        <span class="fab-icon">‚öôÔ∏è</span>
                        <span class="fab-text">Calculer</span>
                    </button>
                    <button type="button" id="mobile-reset-btn" class="fab fab-secondary">
                        <span class="fab-icon">üîÑ</span>
                        <span class="fab-text">Reset</span>
                    </button>
                </div>
            </div>

            <!-- Right Panel - Tabbed Interface -->
            <div class="right-panel">
                <div class="client-info-header" id="client-info-header" style="display: none;"></div>
                
                <div class="tab-navigation">
                    <button class="tab-btn active" id="tab1-btn" onclick="switchTab('tab1')">Piliers</button>
                    <button class="tab-btn" id="tab2-btn" onclick="switchTab('tab2')">Cycles</button>
                    <button class="tab-btn" id="tab3-btn" onclick="switchTab('tab3')">Phase de r√©alisation</button>
                </div>
                
                <div class="tab-content">
                    <div class="tab-panel active" id="tab1-panel">
                        <div class="results-area" id="results-area">
                            <div class="empty-state" id="empty-state">
                                Remplissez les champs obligatoires (Pr√©nom 1, Nom de famille, Date de naissance) et cliquez sur "Calculer les r√©sultats" pour voir les sorties ici.
                            </div>
                            <div class="results-grid" id="results-container" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="tab2-panel">
                        <div class="results-area" id="cycles-area">
                            <div class="empty-state" id="cycles-empty-state">
                                Remplissez les champs obligatoires et cliquez sur "Calculer les r√©sultats" pour voir les cycles de vie ici.
                            </div>
                            <div class="cycles-grid" id="cycles-container" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <div class="tab-panel" id="tab3-panel">
                        <div class="results-area" id="realization-area">
                            <div class="empty-state" id="realization-empty-state">
                                Remplissez les champs obligatoires et cliquez sur "Calculer les r√©sultats" pour voir la phase de r√©alisation ici.
                            </div>
                            <div class="realization-grid" id="realization-container" style="display: none;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="panel-actions" id="panel-actions" style="display: none;">
                    <button type="button" id="generate-pdf-btn" class="action-btn pdf-btn">üìÑ G√©n√©rer rapport PDF</button>
                    <button type="button" id="print-results-btn" class="action-btn print-btn">üñ®Ô∏è Imprimer les r√©sultats</button>
                </div>
            </div>
        </div>
    </div>

    <!-- External JavaScript Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Emergency Mobile Fix Script -->
    <script>
        // EMERGENCY: Force FAB visibility on mobile devices
        function forceMobileFAB() {
            const isMobile = window.innerWidth <= 480 || /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            const fabContainer = document.getElementById('mobile-fab-container');
            const formActions = document.querySelector('.form-actions');
            
            if (isMobile && fabContainer) {
                console.log('üö® EMERGENCY: Forcing FAB visibility on mobile');
                
                // Force show FAB container
                fabContainer.style.display = 'block';
                fabContainer.style.position = 'fixed';
                fabContainer.style.bottom = '0';
                fabContainer.style.left = '0';
                fabContainer.style.right = '0';
                fabContainer.style.zIndex = '999999999';
                fabContainer.style.pointerEvents = 'none';
                
                // Force hide original form actions
                if (formActions) {
                    formActions.style.display = 'none';
                }
                
                // Style FAB buttons
                const fabs = fabContainer.querySelectorAll('.fab');
                fabs.forEach(fab => {
                    fab.style.position = 'absolute';
                    fab.style.width = '80px';
                    fab.style.height = '80px';
                    fab.style.borderRadius = '50%';
                    fab.style.border = '4px solid white';
                    fab.style.pointerEvents = 'auto';
                    fab.style.display = 'flex';
                    fab.style.flexDirection = 'column';
                    fab.style.alignItems = 'center';
                    fab.style.justifyContent = 'center';
                    fab.style.fontSize = '12px';
                    fab.style.fontWeight = '800';
                    fab.style.textAlign = 'center';
                    fab.style.boxShadow = '0 12px 40px rgba(0,0,0,0.8)';
                    fab.style.transition = 'all 0.2s ease';
                    fab.style.webkitTapHighlightColor = 'transparent';
                    fab.style.transform = 'translateZ(0)';
                    fab.style.webkitTransform = 'translateZ(0)';
                    fab.style.willChange = 'transform';
                    fab.style.webkitAppearance = 'none';
                    fab.style.appearance = 'none';
                });
                
                // Style primary FAB (green)
                const primaryFab = document.getElementById('mobile-submit-btn');
                if (primaryFab) {
                    primaryFab.style.background = 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)';
                    primaryFab.style.color = 'white';
                    primaryFab.style.bottom = '30px';
                    primaryFab.style.right = '30px';
                }
                
                // Style secondary FAB (red)
                const secondaryFab = document.getElementById('mobile-reset-btn');
                if (secondaryFab) {
                    secondaryFab.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
                    secondaryFab.style.color = 'white';
                    secondaryFab.style.bottom = '30px';
                    secondaryFab.style.right = '130px';
                }
                
                // Style FAB icons
                const fabIcons = fabContainer.querySelectorAll('.fab-icon');
                fabIcons.forEach(icon => {
                    icon.style.fontSize = '32px';
                    icon.style.lineHeight = '1';
                    icon.style.marginBottom = '2px';
                });
                
                // Style FAB text
                const fabTexts = fabContainer.querySelectorAll('.fab-text');
                fabTexts.forEach(text => {
                    text.style.fontSize = '11px';
                    text.style.lineHeight = '1';
                    text.style.fontWeight = '700';
                });
                
                // Style backdrop
                const backdrop = fabContainer.querySelector('.fab-backdrop');
                if (backdrop) {
                    backdrop.style.position = 'absolute';
                    backdrop.style.bottom = '0';
                    backdrop.style.left = '0';
                    backdrop.style.right = '0';
                    backdrop.style.height = '140px';
                    backdrop.style.background = 'linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.8) 100%)';
                    backdrop.style.pointerEvents = 'none';
                }
                
                console.log('‚úÖ FAB forced to be visible');
            }
        }
        
        // Run immediately and on load
        forceMobileFAB();
        document.addEventListener('DOMContentLoaded', forceMobileFAB);
        window.addEventListener('load', forceMobileFAB);
        window.addEventListener('resize', forceMobileFAB);
    </script>
    
    <!-- Application JavaScript Modules -->
    <script src="js/version-manager.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/validator.js"></script>
    <script src="js/results-display.js"></script>
    <script src="js/form-handler.js"></script>
    <script src="js/test-suite.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
